# Livebox Unifi

This repository contains the necessary components to replace orange livebox with Unifi USG.

This is based on informations provided in this [french tutorial](https://lafibre.info/remplacer-livebox/le-guide-complet-pour-usgusg-pro-internet-tv-livebox-ipv6)

Some scripts are inspired by https://github.com/shisva/USG_Orange

# Contents

 - livebox-dhcp-auth.sh

Script to generate the Livebox's `rfc3118-auth` token

 - vyatta-dhcp3-livebox.sh

Most online tutorials provide a binary as-is - this script allows anybody to build their own binary they can trust.

Script to generate the patched dhclient3 bianry and deb packages from Unifi firmware archives.
This is based on a [wheezy-mips](https://github.com/ynirk/dockerfiles/tree/master/wheezy-mips) docker image

 - scripts directory is used to build dhclient3 packages and binary

 - templates/script_orange_eth0.sh

This script is meant to be run on your USG to apply the external interface configuration. Use `livebox-dhcp-auth.sh` first to generate your auth token.

 - templates/config.gateway.json

`The config.gateway.json is a file that sits in the UniFi Network application filesystem and allows custom changes to the USG that aren't available in the web GUI.`

This file allows to keep your USG configuration (generated by `script_orange_eth0.sh`) upon reboot and updates.

Unifi config.gateway.json [reference](https://help.ui.com/hc/en-us/articles/215458888-UniFi-How-to-further-customize-USG-configuration-with-config-gateway-json)

 - templates/livebox-update.sh

This script is used to replace the original dhclient3 by the patched one and re-patch `vyatta-interfaces.pl` if necessary after a USG update.
place the `dhclient3` binary in /config/scripts and make sure it is executable.
place the script `livebox-update.sh` in /config/script/post-config.d/ and make sure it is executable.
